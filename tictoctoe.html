<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Tic Tac Toe â€” NinjaGames</title>
<style>
  :root{
    --bg1:#0f1724;
    --bg2:#061021;
    --accent:#00E5FF;
    --accent2:#7CFFB2;
    --card:#0b1220;
    --glass: rgba(255,255,255,0.03);
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    font-family:Inter, Poppins, system-ui, Arial;
    background: radial-gradient(1200px 600px at 10% 10%, rgba(0,230,255,0.06), transparent),
                linear-gradient(180deg,var(--bg1),var(--bg2));
    color:#e6f7ff;
    padding:20px;
  }

  .wrapper{
    width:100%;
    max-width:820px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
    border-radius:18px;
    padding:24px;
    box-shadow: 0 10px 30px rgba(2,8,23,0.6);
    display:flex;
    gap:20px;
    align-items:flex-start;
  }

  /* Left: board */
  .game-area{
    flex:1 1 540px;
    min-width:260px;
  }
  header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
  }
  .title{
    display:flex;
    gap:12px;
    align-items:center;
  }
  .logo{
    width:46px;height:46px;border-radius:10px;
    background: linear-gradient(135deg,var(--accent),var(--accent2));
    box-shadow: 0 6px 18px rgba(0,230,255,0.12), inset 0 -6px 18px rgba(255,255,255,0.06);
    display:flex;align-items:center;justify-content:center;
    font-weight:800;color:#012; font-size:20px;
  }
  h1{ margin:0;font-size:1.1rem; letter-spacing:0.4px }
  p.sub{ margin:0; font-size:0.85rem; color: #9fd; opacity:0.9 }

  .controls{
    display:flex;
    gap:10px;
    align-items:center;
  }
  .btn{
    background:var(--glass); border:1px solid rgba(255,255,255,0.04);
    padding:8px 12px; border-radius:10px; cursor:pointer; color:inherit;
    font-weight:600; backdrop-filter: blur(6px);
  }
  .btn:hover{ transform:translateY(-2px); transition:all 0.14s ease; }

  /* Board container */
  .board-wrap{
    margin-top:18px;
    background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.02));
    padding:18px;
    border-radius:14px;
    box-shadow: 0 8px 24px rgba(2,8,23,0.5);
    position:relative;
  }

  .statusbar{
    display:flex;
    align-items:center;
    gap:12px;
    padding:8px;
    border-radius:10px;
    margin-bottom:12px;
  }
  .turn {
    display:flex;
    align-items:center;
    gap:8px;
    background:linear-gradient(90deg, rgba(0,230,255,0.06), rgba(124,255,178,0.03));
    padding:8px 12px; border-radius:10px; font-weight:700;
    color:var(--accent);
  }
  .turn .pill{
    width:34px;height:34px;border-radius:8px;
    display:flex;align-items:center;justify-content:center;
    background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
    border:1px solid rgba(255,255,255,0.04);
    font-size:1.05rem;
  }
  .score{
    margin-left:auto;color:#bfeeea;font-weight:600;
  }

  /* actual grid */
  .board{
    width:100%;
    max-width:520px;
    aspect-ratio:1/1;
    margin:0 auto;
    display:grid;
    grid-template-columns: repeat(3,1fr);
    grid-template-rows: repeat(3,1fr);
    gap:14px;
    padding:14px;
    position:relative;
  }
  .cell{
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:12px;
    display:flex;align-items:center;justify-content:center;
    font-size:clamp(32px,7vw,56px);
    font-weight:800;
    color:rgba(255,255,255,0.95);
    user-select:none;
    cursor:pointer;
    box-shadow: 0 6px 18px rgba(2,8,23,0.6), inset 0 -6px 18px rgba(255,255,255,0.02);
    transition: transform 0.12s ease, background 0.12s ease;
  }
  .cell:active{ transform: scale(0.98); }
  .cell.x{ color: #9EE9FF; text-shadow: 0 6px 20px rgba(0,230,255,0.06); }
  .cell.o{ color: #bfffbf; text-shadow: 0 6px 20px rgba(124,255,178,0.06); }

  /* strike line that appears on win */
  .strike{
    position:absolute;
    left:50%; top:50%;
    width:0; height:6px;
    background: linear-gradient(90deg, rgba(0,230,255,0.95), rgba(124,255,178,0.9));
    transform-origin:center center;
    border-radius:6px;
    box-shadow: 0 6px 24px rgba(0,230,255,0.12);
    transition: all 300ms cubic-bezier(.2,.9,.2,1);
    pointer-events:none;
  }

  /* winner modal */
  .overlay{
    position:fixed; inset:0; display:none; align-items:center; justify-content:center;
    background: linear-gradient(0deg, rgba(1,6,12,0.6), rgba(1,6,12,0.6));
    z-index:50;
  }
  .overlay.show{ display:flex; }
  .modal{
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    padding:22px; border-radius:12px; min-width:260px; text-align:center;
    box-shadow: 0 10px 40px rgba(2,8,23,0.7);
  }
  .modal h2{ margin:0 0 8px 0; font-size:1.2rem }
  .modal p{ margin:6px 0 14px; color:#cfeee6; font-weight:600 }
  .modal .win-icon{
    width:68px;height:68px;border-radius:14px;margin:8px auto 12px;
    display:flex;align-items:center;justify-content:center;font-size:1.6rem;
    background: linear-gradient(135deg, rgba(0,230,255,0.12), rgba(124,255,178,0.08));
    color:var(--accent);
    box-shadow: 0 8px 22px rgba(0,230,255,0.06);
  }
  .modal .actions{ display:flex; gap:8px; justify-content:center; margin-top:10px }
  .primary{
    background: linear-gradient(90deg,var(--accent),var(--accent2));
    color:#012; padding:10px 14px; border-radius:10px; font-weight:800;
    border:none; cursor:pointer;
  }
  .secondary{
    background:transparent; border:1px solid rgba(255,255,255,0.06);
    padding:9px 12px; border-radius:10px; cursor:pointer; color:inherit; font-weight:700;
  }

  /* small screens */
  @media (max-width:720px){
    .wrapper{ flex-direction:column; padding:16px; }
    .board{ gap:10px; padding:10px; }
  }
</style>
</head>
<body>
  <div class="wrapper" role="application" aria-label="Tic Tac Toe Game">
    <div class="game-area">
      <header>
        <div class="title">
          <div class="logo">NG</div>
          <div>
            <h1>NinjaGames â€” Tic Tac Toe</h1>
            <p class="sub">Play with a friend â€” local 2-player. First to align 3 wins.</p>
          </div>
        </div>

        <div class="controls" aria-hidden="false">
          <button class="btn" id="btnReset">Restart</button>
          <button class="btn" id="btnSwap">Swap Starter</button>
        </div>
      </header>

      <div class="board-wrap" role="region" aria-label="Game board">
        <div class="statusbar">
          <div class="turn" id="turnIndicator">
            <div class="pill" id="turnPill">X</div>
            <div id="turnText">Player X's Turn</div>
          </div>
          <div class="score" id="scoreBoard">X: 0 &nbsp;&nbsp; O: 0</div>
        </div>

        <div class="board" id="board" tabindex="0" aria-live="polite">
          <!-- cells inserted by JS -->
        </div>

        <div class="strike" id="strike"></div>
      </div>
    </div>

    <!-- right panel (info) -->
    <aside style="width:260px;min-width:220px;">
      <div style="background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent); padding:14px; border-radius:12px;">
        <h3 style="margin:6px 0 10px 0">How to play</h3>
        <p style="margin:0 0 10px; color:#bfeeea">Two players share the device. Tap an empty cell to place your mark. First to get 3 in a line wins.</p>

        <h4 style="margin:10px 0 6px 0">Shortcuts</h4>
        <ul style="margin:6px 0 10px 20px; color:#bfeeea">
          <li>Restart â€” restart game</li>
          <li>Swap Starter â€” change who begins</li>
        </ul>

        <div style="margin-top:14px; display:flex; gap:8px;">
          <button class="primary" id="hintBtn" style="flex:1">Show Hint</button>
          <button class="secondary" id="soundBtn">Sound</button>
        </div>
      </div>
    </aside>
  </div>

  <!-- winner overlay -->
  <div class="overlay" id="overlay" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document">
      <div class="win-icon" id="winIcon">ðŸŽ‰</div>
      <h2 id="winTitle">Player X Wins!</h2>
      <p id="winMsg">Nice move â€” 3 in a row.</p>
      <div class="actions">
        <button class="primary" id="modalRestart">Play Again</button>
        <button class="secondary" id="modalClose">Close</button>
      </div>
    </div>
  </div>

<script>
  // Game state
  const boardEl = document.getElementById('board');
  const strike = document.getElementById('strike');
  const turnPill = document.getElementById('turnPill');
  const turnText = document.getElementById('turnText');
  const btnReset = document.getElementById('btnReset');
  const btnSwap = document.getElementById('btnSwap');
  const overlay = document.getElementById('overlay');
  const winTitle = document.getElementById('winTitle');
  const winMsg = document.getElementById('winMsg');
  const modalRestart = document.getElementById('modalRestart');
  const modalClose = document.getElementById('modalClose');
  const scoreBoard = document.getElementById('scoreBoard');
  const hintBtn = document.getElementById('hintBtn');

  let cells = Array(9).fill('');
  let current = 'X';
  let active = true;
  let score = { X:0, O:0 };
  // starter variable to allow swapping who starts
  let starter = 'X';

  // winning combos and a small metadata map for strike positioning
  const combos = [
    {c:[0,1,2], type:'row', idx:0},
    {c:[3,4,5], type:'row', idx:1},
    {c:[6,7,8], type:'row', idx:2},
    {c:[0,3,6], type:'col', idx:0},
    {c:[1,4,7], type:'col', idx:1},
    {c:[2,5,8], type:'col', idx:2},
    {c:[0,4,8], type:'diag', idx:0},
    {c:[2,4,6], type:'diag', idx:1}
  ];

  function renderBoard(){
    boardEl.innerHTML = '';
    cells.forEach((val,i) => {
      const d = document.createElement('div');
      d.className = 'cell ' + (val? (val==='X'?'x':'o') : '');
      d.setAttribute('data-index', i);
      d.setAttribute('role','button');
      d.setAttribute('aria-label', val? ('Cell ' + (i+1) + ' contains ' + val) : ('Empty cell ' + (i+1)));
      d.innerText = val;
      d.addEventListener('click', onCellClick);
      boardEl.appendChild(d);
    });
  }

  function onCellClick(e){
    const i = Number(e.currentTarget.dataset.index);
    if(!active || cells[i]) return;
    cells[i] = current;
    renderBoard();
    const winInfo = checkWinner();
    if(winInfo){
      active = false;
      showStrike(winInfo); // draw line
      showWinner(current, winInfo);
      return;
    }
    if(!cells.includes('')){
      // draw
      active = false;
      showDraw();
      return;
    }
    current = current === 'X' ? 'O' : 'X';
    updateTurnUI();
  }

  function checkWinner(){
    for(const combo of combos){
      const [a,b,c] = combo.c;
      if(cells[a] && cells[a] === cells[b] && cells[a] === cells[c]){
        return combo; // return metadata for strike
      }
    }
    return null;
  }

  function showStrike(winInfo){
    // compute strike position & size using boardEl bounding box & combo type
    const rect = boardEl.getBoundingClientRect();
    // We'll use percentages relative to board (0..100)
    let leftPct=50, topPct=50, widthPct=0, rotate=0;

    if(winInfo.type === 'row'){
      // horizontal: center horizontally, y depends on idx
      topPct = [16.5, 50, 83.5][winInfo.idx];
      leftPct = 50;
      widthPct = 88;
      rotate = 0;
    } else if(winInfo.type === 'col'){
      leftPct = [16.5, 50, 83.5][winInfo.idx];
      topPct = 50;
      widthPct = rect.width * 0.04 / rect.width * 100; // thin vertical bar expressed as width %
      // We'll instead set transform to rotate(90deg) and use big width
      widthPct = 88;
      rotate = 90;
    } else { // diag
      leftPct = 50; topPct = 50; widthPct = 125; // extra long for diagonal
      rotate = winInfo.idx === 0 ? 45 : -45;
    }

    // Apply styles
    strike.style.display = 'block';
    strike.style.opacity = '1';
    strike.style.left = leftPct + '%';
    strike.style.top = topPct + '%';
    // Set width relative to board width in px for crispness
    const boardWidth = rect.width;
    const pxW = Math.max( (widthPct/100) * boardWidth, 6 );
    strike.style.width = pxW + 'px';
    strike.style.height = Math.max(8, Math.round(boardWidth * 0.018)) + 'px';

    strike.style.transform = `translate(-50%,-50%) rotate(${rotate}deg)`;
    // subtle scale animation
    strike.style.transition = 'all 320ms cubic-bezier(.2,.9,.2,1)';
    strike.style.boxShadow = '0 8px 28px rgba(0,230,255,0.12)';
    // flash effect
    strike.animate([
      { filter: 'brightness(1.4) saturate(1.2)', transform: `translate(-50%,-50%) rotate(${rotate}deg) scaleX(0.6)` },
      { filter: 'brightness(1) saturate(1)', transform: `translate(-50%,-50%) rotate(${rotate}deg) scaleX(1.02)` },
      { filter: 'brightness(1.2) saturate(1.1)', transform: `translate(-50%,-50%) rotate(${rotate}deg) scaleX(1)` }
    ], { duration: 420, easing: 'cubic-bezier(.2,.9,.2,1)' });
  }

  function showWinner(winner, winInfo){
    // update score
    score[winner] = (score[winner] || 0) + 1;
    scoreBoard.innerText = `X: ${score.X}   O: ${score.O}`;

    // highlight winning cells a bit
    for(const idx of winInfo.c){
      const cell = boardEl.querySelector(`[data-index="${idx}"]`);
      if(cell){
        cell.style.transition = 'transform 300ms ease, box-shadow 300ms ease';
        cell.style.transform = 'scale(1.06)';
        cell.style.boxShadow = '0 14px 40px rgba(0,0,0,0.6), 0 8px 28px rgba(0,230,255,0.06)';
      }
    }

    // show modal overlay
    winTitle.innerText = `Player ${winner} Wins!`;
    winMsg.innerText = `Nice â€” ${winner} aligned 3 in a row.`;
    document.getElementById('winIcon').innerText = winner === 'X' ? 'âœ¨' : 'ðŸ†';
    overlay.classList.add('show');
    overlay.setAttribute('aria-hidden','false');
  }

  function showDraw(){
    winTitle.innerText = `It's a Draw!`;
    winMsg.innerText = `No winner this round.`;
    document.getElementById('winIcon').innerText = 'ðŸ¤';
    overlay.classList.add('show');
    overlay.setAttribute('aria-hidden','false');
  }

  function updateTurnUI(){
    turnPill.innerText = current;
    turnText.innerText = `Player ${current}'s Turn`;
    // small glow for X/O
    if(current === 'X'){
      turnPill.style.background = 'linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01))';
      turnPill.style.color = '#9EE9FF';
    } else {
      turnPill.style.background = 'linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01))';
      turnPill.style.color = '#bfffbf';
    }
  }

  function resetBoard(keepStarter=false){
    cells = Array(9).fill('');
    active = true;
    strike.style.width = '0';
    strike.style.opacity = '0';
    strike.style.display = 'none';
    // reset cell transforms
    const all = boardEl.querySelectorAll('.cell');
    all.forEach(c => {
      c.style.transform = '';
      c.style.boxShadow = '';
    });
    if(!keepStarter) starter = starter; // unchanged
    current = starter;
    updateTurnUI();
    renderBoard();
  }

  // event bindings
  btnReset.addEventListener('click', () => {
    resetBoard(true);
    overlay.classList.remove('show');
    overlay.setAttribute('aria-hidden','true');
  });

  btnSwap.addEventListener('click', () => {
    starter = starter === 'X' ? 'O' : 'X';
    current = starter;
    resetBoard(true);
  });

  modalRestart.addEventListener('click', () => {
    overlay.classList.remove('show');
    overlay.setAttribute('aria-hidden','true');
    // toggle starter to winner? no keep same starter
    resetBoard(true);
  });
  modalClose.addEventListener('click', () => {
    overlay.classList.remove('show');
    overlay.setAttribute('aria-hidden','true');
  });

  // keyboard support: numbers 1-9 map to cells
  document.addEventListener('keydown', e => {
    if(!active) return;
    const key = e.key;
    if(key >= '1' && key <= '9'){
      const idx = Number(key)-1;
      const cellEl = boardEl.querySelector(`[data-index="${idx}"]`);
      if(cellEl) cellEl.click();
    }
  });

  hintBtn.addEventListener('click', () => {
    // simple hint: choose first available center, else corner, else random
    if(!active) return;
    const movesPriority = [4,0,2,6,8,1,3,5,7];
    const choice = movesPriority.find(i => !cells[i]);
    if(choice !== undefined){
      // tiny pulsing to show
      const el = boardEl.querySelector(`[data-index="${choice}"]`);
      if(el){
        el.animate([{ transform: 'scale(1.06)' }, { transform: 'scale(1)' }], { duration: 400, iterations: 2 });
      }
    }
  });

  // initialize
  renderBoard();
  updateTurnUI();

  // handle click outside modal to close
  overlay.addEventListener('click', (ev) => {
    if(ev.target === overlay){
      overlay.classList.remove('show');
      overlay.setAttribute('aria-hidden','true');
    }
  });

  // expose for debugging (optional)
  window.ninjaTic = {
    resetBoard, renderBoard, getState: () => ({cells, current, active, score})
  };
</script>
</body>
</html>
